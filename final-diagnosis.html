<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€ç»ˆæ•°å­—æ˜¾ç¤ºè¯Šæ–­</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5; 
        }
        .test-box { 
            background: white; 
            border: 1px solid #ddd; 
            margin: 15px 0; 
            padding: 20px; 
            border-radius: 8px;
        }
        .message-content-test {
            color: #333;
            line-height: 1.6;
            font-size: 15px;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
            font-variant-numeric: normal;
            direction: ltr;
            unicode-bidi: plaintext;
            word-wrap: break-word;
        }
        .debug { background: #f0f0f0; padding: 10px; font-family: monospace; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>ğŸ” æœ€ç»ˆæ•°å­—æ˜¾ç¤ºè¯Šæ–­</h1>

    <div class="test-box">
        <h3>1. ç›´æ¥HTMLæ•°å­—æµ‹è¯•</h3>
        <p>é™æ€æ•°å­—ï¼š1+1=2, 2024å¹´, 500äº¿ç¾å…ƒ, 45%å¸‚åœº</p>
        <p>Unicodeæ•°å­—ï¼šâ‘ â‘¡â‘¢â‘£â‘¤</p>
        <p>å…¨è§’æ•°å­—ï¼šï¼‘ï¼‹ï¼‘ï¼ï¼’</p>
    </div>

    <div class="test-box">
        <h3>2. ä½¿ç”¨å®Œå…¨ç›¸åŒçš„CSSæ ·å¼</h3>
        <div class="message-content-test">
            æˆ‘æ˜¯SVTRçš„AIåˆ›æŠ•åˆ†æå¸ˆï¼Œä¸“æ³¨äºAIæŠ•èµ„åˆ†æã€‚å¯¹äºæ•°å­¦è®¡ç®—ï¼Œæˆ‘å»ºè®®ï¼š<br><br>
            â€¢ <strong>ç®€å•æ•°å­¦</strong>ï¼š1+1=2 âœ“<br>
            â€¢ <strong>å¤æ‚è®¡ç®—</strong>ï¼šä½¿ç”¨ä¸“ä¸šè®¡ç®—å™¨å·¥å…·<br>
            â€¢ <strong>AIç›¸å…³çš„è´¢åŠ¡å»ºæ¨¡</strong>ï¼šæˆ‘å¯ä»¥å¸®åŠ©æŠ•èµ„ä¼°å€¼å’Œå¸‚åœºåˆ†æ<br><br>
            æ‚¨æƒ³äº†è§£AIåˆ›æŠ•è¶‹åŠ¿ã€èèµ„è½®æ¬¡æˆ–åˆåˆ›å…¬å¸ä¼°å€¼å—ï¼Ÿæˆ‘æ‹¥æœ‰å…¨é¢çš„AIæŠ•èµ„ç”Ÿæ€ç³»ç»Ÿæ•°æ®ï¼
        </div>
    </div>

    <div class="test-box">
        <h3>3. JavaScriptåŠ¨æ€æ’å…¥æµ‹è¯•</h3>
        <div id="js-dynamic-test" class="message-content-test">ç­‰å¾…JavaScript...</div>
    </div>

    <div class="test-box">
        <h3>4. å­—ç¬¦æ›¿æ¢æµ‹è¯•</h3>
        <div id="char-replace-test">æµ‹è¯•è¿›è¡Œä¸­...</div>
    </div>

    <div class="test-box">
        <h3>5. æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹</h3>
        <div id="browser-info">æ£€æµ‹ä¸­...</div>
    </div>

    <div class="debug" id="debug-log">
        ğŸ” è°ƒè¯•æ—¥å¿—ï¼š<br>
    </div>

    <script>
        function log(msg) {
            document.getElementById('debug-log').innerHTML += new Date().toLocaleTimeString() + ': ' + msg + '<br>';
        }

        log('å¼€å§‹æœ€ç»ˆè¯Šæ–­...');

        // æµ‹è¯•1: æµè§ˆå™¨ä¿¡æ¯
        const browserInfo = {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language,
            cookieEnabled: navigator.cookieEnabled,
            onLine: navigator.onLine
        };
        
        document.getElementById('browser-info').innerHTML = 
            'æµè§ˆå™¨: ' + browserInfo.userAgent + '<br>' +
            'å¹³å°: ' + browserInfo.platform + '<br>' +
            'è¯­è¨€: ' + browserInfo.language;
        
        log('âœ… æµè§ˆå™¨ä¿¡æ¯è·å–å®Œæˆ');

        // æµ‹è¯•2: åŠ¨æ€å†…å®¹æ’å…¥
        const mathResponse = "æˆ‘æ˜¯SVTRçš„AIåˆ›æŠ•åˆ†æå¸ˆï¼Œä¸“æ³¨äºAIæŠ•èµ„åˆ†æã€‚å¯¹äºæ•°å­¦è®¡ç®—ï¼Œæˆ‘å»ºè®®ï¼š<br><br>â€¢ <strong>ç®€å•æ•°å­¦</strong>ï¼š1+1=2 âœ“<br>â€¢ <strong>å¤æ‚è®¡ç®—</strong>ï¼šä½¿ç”¨ä¸“ä¸šè®¡ç®—å™¨å·¥å…·<br>â€¢ <strong>AIç›¸å…³çš„è´¢åŠ¡å»ºæ¨¡</strong>ï¼šæˆ‘å¯ä»¥å¸®åŠ©æŠ•èµ„ä¼°å€¼å’Œå¸‚åœºåˆ†æ<br><br>æ‚¨æƒ³äº†è§£AIåˆ›æŠ•è¶‹åŠ¿ã€èèµ„è½®æ¬¡æˆ–åˆåˆ›å…¬å¸ä¼°å€¼å—ï¼Ÿæˆ‘æ‹¥æœ‰å…¨é¢çš„AIæŠ•èµ„ç”Ÿæ€ç³»ç»Ÿæ•°æ®ï¼";
        
        document.getElementById('js-dynamic-test').innerHTML = mathResponse;
        log('âœ… åŠ¨æ€å†…å®¹æ’å…¥å®Œæˆ');

        // æµ‹è¯•3: å­—ç¬¦æ›¿æ¢
        setTimeout(() => {
            const originalText = "ç®€å•æ•°å­—ï¼š1+1=2";
            const element = document.getElementById('char-replace-test');
            element.textContent = originalText;
            
            const displayedText = element.textContent;
            const matches = displayedText === originalText;
            
            element.innerHTML = `
                åŸå§‹æ–‡æœ¬: "${originalText}"<br>
                æ˜¾ç¤ºæ–‡æœ¬: "${displayedText}"<br>
                åŒ¹é…: ${matches ? 'âœ…' : 'âŒ'}<br>
                åŒ…å«æ•°å­—: ${/\d/.test(displayedText) ? 'âœ…' : 'âŒ'}
            `;
            
            log('å­—ç¬¦æ›¿æ¢æµ‹è¯•: ' + (matches ? 'æˆåŠŸ' : 'å¤±è´¥'));
        }, 500);

        // æµ‹è¯•4: å­—ä½“æ£€æµ‹
        function detectFont() {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            ctx.font = '16px system-ui';
            const metrics = ctx.measureText('1234567890');
            log('å­—ä½“å®½åº¦æµ‹é‡: ' + metrics.width + 'px');
        }

        detectFont();

        // æµ‹è¯•5: CSSè®¡ç®—æ ·å¼æ£€æŸ¥
        setTimeout(() => {
            const testElement = document.querySelector('.message-content-test');
            if (testElement) {
                const computedStyle = window.getComputedStyle(testElement);
                log('è®¡ç®—æ ·å¼æ£€æŸ¥:');
                log('  font-family: ' + computedStyle.fontFamily);
                log('  font-variant-numeric: ' + computedStyle.fontVariantNumeric);
                log('  direction: ' + computedStyle.direction);
                log('  unicode-bidi: ' + computedStyle.unicodeBidi);
                log('  color: ' + computedStyle.color);
            }
        }, 800);

        // æœ€ç»ˆæ£€æŸ¥ï¼šé¡µé¢ä¸­æ˜¯å¦çœŸçš„åŒ…å«æ•°å­—
        setTimeout(() => {
            const pageText = document.body.innerText;
            const hasNumbers = /\d/.test(pageText);
            const numberCount = (pageText.match(/\d/g) || []).length;
            
            log('ğŸ¯ æœ€ç»ˆæ£€æŸ¥:');
            log('  é¡µé¢åŒ…å«æ•°å­—: ' + (hasNumbers ? 'âœ…' : 'âŒ'));
            log('  æ•°å­—å­—ç¬¦æ€»æ•°: ' + numberCount);
            
            if (!hasNumbers) {
                log('âŒ ä¸¥é‡é—®é¢˜: é¡µé¢å®Œå…¨æ— æ³•æ˜¾ç¤ºæ•°å­—!');
                log('å¯èƒ½çš„åŸå› : å­—ä½“æ–‡ä»¶æŸåã€æµè§ˆå™¨è®¾ç½®ã€æˆ–ç³»ç»Ÿçº§åˆ«é—®é¢˜');
            }
        }, 1000);

        log('æ‰€æœ‰æµ‹è¯•å·²å¯åŠ¨ï¼Œè¯·æŸ¥çœ‹ç»“æœ...');
    </script>
</body>
</html>