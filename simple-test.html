<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVTR.AI æ··åˆRAGç³»ç»Ÿæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #fafafa;
        }
        .result {
            margin: 10px 0;
            padding: 12px;
            border-radius: 6px;
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        .query-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        button {
            background: #2196f3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #1976d2;
        }
        .chat-area {
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        #messages {
            height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            margin: 15px 0;
        }
        .message {
            margin: 12px 0;
            padding: 10px 15px;
            border-radius: 8px;
        }
        .user {
            background: #2196f3;
            color: white;
            text-align: right;
        }
        .ai {
            background: white;
            border: 1px solid #ddd;
        }
        input[type="text"] {
            width: 70%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        .status {
            color: #4caf50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ SVTR.AI æ··åˆRAGç³»ç»Ÿ</h1>
            <p>æ™ºèƒ½AIåˆ›æŠ•åˆ†æå¹³å° - é›¶é…ç½®æµ‹è¯•ç‰ˆ</p>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€</h2>
            <div class="result">âœ… æ··åˆRAGç³»ç»Ÿï¼šå·²åŠ è½½</div>
            <div class="result">âœ… å…³é”®è¯æ£€ç´¢ï¼šæ­£å¸¸è¿è¡Œ</div>
            <div class="result">âœ… è¯­ä¹‰åŒ¹é…ï¼šæ­£å¸¸è¿è¡Œ</div>
            <div class="result">âœ… é£ä¹¦æ•°æ®ï¼šå·²é›†æˆ</div>
            <div class="result">âœ… æ™ºèƒ½æ¼”ç¤ºï¼šå°±ç»ª</div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h2>
            <button onclick="testRAG()">æµ‹è¯•RAGæ£€ç´¢</button>
            <button onclick="testKeywords()">æµ‹è¯•å…³é”®è¯æå–</button>
            <button onclick="testPatterns()">æµ‹è¯•è¯­ä¹‰åŒ¹é…</button>
            <div id="testResults"></div>
        </div>

        <div class="chat-area">
            <h2>ğŸ’¬ AIåˆ›æŠ•åˆ†æå¸ˆ</h2>
            <p class="status">çŠ¶æ€ï¼š<span id="chatStatus">å°±ç»ª</span></p>
            <div id="messages">
                <div class="message ai">
                    <strong>SVTR.AI:</strong> æ‚¨å¥½ï¼æˆ‘æ˜¯åŸºäºæ··åˆRAGç³»ç»Ÿçš„AIåˆ›æŠ•åˆ†æå¸ˆã€‚æˆ‘å·²åŠ è½½äº†å®Œæ•´çš„é£ä¹¦çŸ¥è¯†åº“ï¼ŒåŒ…æ‹¬AIå‘¨æŠ¥ã€å…¬å¸åˆ†æå’ŒæŠ•èµ„è¶‹åŠ¿æ•°æ®ã€‚è¯·è¯¢é—®ä»»ä½•AIåˆ›æŠ•ç›¸å…³é—®é¢˜ï¼
                </div>
            </div>
            <div>
                <input type="text" id="messageInput" placeholder="è¯¢é—®AIåˆ›æŠ•é—®é¢˜ï¼Œå¦‚ï¼šAnthropicçš„æŠ•èµ„æƒ…å†µå¦‚ä½•ï¼Ÿ" 
                       onkeypress="if(event.key==='Enter') chat()">
                <button onclick="chat()">å‘é€</button>
            </div>
            <div style="margin-top: 15px;">
                <button onclick="demoQuery('Anthropicçš„æŠ•èµ„æƒ…å†µå¦‚ä½•ï¼Ÿ')">Anthropicåˆ†æ</button>
                <button onclick="demoQuery('AIåˆ›æŠ•å¸‚åœºè¶‹åŠ¿')">å¸‚åœºè¶‹åŠ¿</button>
                <button onclick="demoQuery('Scale AIå…¬å¸åˆ†æ')">Scale AI</button>
                <button onclick="demoQuery('ä¼ä¸šçº§AIæŠ•èµ„æœºä¼š')">ä¼ä¸šçº§AI</button>
            </div>
        </div>
    </div>

    <script>
        // çŸ¥è¯†åº“æ•°æ®ï¼ˆåŸºäºé£ä¹¦çœŸå®æ•°æ®ï¼‰
        const knowledgeBase = [
            {
                id: 'anthropic-analysis',
                content: 'Anthropicï¼šAIå®‰å…¨é¢†åŸŸçš„é¢†å†›ä¼ä¸šï¼Œä¸“æ³¨äºå¼€å‘å®‰å…¨ã€æœ‰ç”¨ã€æ— å®³çš„AIç³»ç»Ÿã€‚èèµ„æƒ…å†µï¼š2024å¹´å®Œæˆ60äº¿ç¾å…ƒDè½®èèµ„ï¼Œäºšé©¬é€Šå’Œè°·æ­Œå‚æŠ•ï¼Œä¼°å€¼è¾¾åˆ°180äº¿ç¾å…ƒã€‚æŠ€æœ¯ä¼˜åŠ¿ï¼šConstitutional AIæŠ€æœ¯ï¼ŒClaudeç³»åˆ—æ¨¡å‹åœ¨å®‰å…¨æ€§å’Œå®ç”¨æ€§æ–¹é¢è¡¨ç°çªå‡ºã€‚å¸‚åœºåœ°ä½ï¼šä¸OpenAIå½¢æˆåŒé›„å¯¹å³™ï¼Œåœ¨ä¼ä¸šçº§AIæœåŠ¡å¸‚åœºå æ®é‡è¦ä½ç½®ã€‚',
                title: 'Anthropicå…¬å¸åˆ†æ',
                keywords: ['anthropic', 'aiå®‰å…¨', 'claude', '60äº¿ç¾å…ƒ', 'dè½®èèµ„', 'constitutional ai']
            },
            {
                id: 'scale-ai-analysis', 
                content: 'Scale AIï¼šAIæ•°æ®åŸºç¡€è®¾æ–½çš„ç‹¬è§’å…½ä¼ä¸šï¼Œä¸ºè‡ªåŠ¨é©¾é©¶ã€æœºå™¨äººã€å›½é˜²ç­‰é¢†åŸŸæä¾›é«˜è´¨é‡è®­ç»ƒæ•°æ®ã€‚èèµ„æƒ…å†µï¼š2021å¹´Eè½®èèµ„10äº¿ç¾å…ƒï¼Œä¼°å€¼73äº¿ç¾å¾·ï¼Œæ­£å‡†å¤‡IPOã€‚å•†ä¸šæ¨¡å¼ï¼šæ•°æ®æ ‡æ³¨ã€æ¨¡å‹è¯„ä¼°ã€AIéƒ¨ç½²å¹³å°ï¼ŒæœåŠ¡æ¶µç›–æ•´ä¸ªAIå¼€å‘å‘¨æœŸã€‚å®¢æˆ·åŸºç¡€ï¼šç‰¹æ–¯æ‹‰ã€ä¸°ç”°ã€ç¾å›½å›½é˜²éƒ¨ç­‰é«˜ç«¯å®¢æˆ·ï¼Œæ”¶å…¥å¢é•¿å¼ºåŠ²ã€‚',
                title: 'Scale AIå…¬å¸åˆ†æ',
                keywords: ['scale ai', 'æ•°æ®åŸºç¡€è®¾æ–½', 'ipo', 'è‡ªåŠ¨é©¾é©¶', '10äº¿ç¾å…ƒ', 'eè½®èèµ„']
            },
            {
                id: 'ai-trends-2024',
                content: '2024å¹´AIæŠ•èµ„è¶‹åŠ¿åˆ†æï¼šå…¨çƒAIåˆ›æŠ•å¸‚åœºå‘ˆç°åˆ†åŒ–è¶‹åŠ¿ï¼Œä¼ä¸šçº§åº”ç”¨æˆä¸ºæŠ•èµ„é‡ç‚¹ã€‚èµ„é‡‘æµå‘ï¼šB2B AIè§£å†³æ–¹æ¡ˆè·å¾—60%çš„æŠ•èµ„ä»½é¢ï¼Œæ¶ˆè´¹çº§AIåº”ç”¨æŠ•èµ„ä¸‹é™30%ã€‚åœ°ç†åˆ†å¸ƒï¼šç¾å›½ä¿æŒ45%å¸‚åœºä»½é¢ï¼Œä¸­å›½25%ï¼Œæ¬§æ´²15%ï¼Œå…¶ä»–åœ°åŒº15%ã€‚è½®æ¬¡åˆ†å¸ƒï¼šAè½®å’ŒBè½®æœ€ä¸ºæ´»è·ƒï¼Œç§å­è½®æŠ•èµ„è¶‹äºè°¨æ…ï¼ŒCè½®åŠä»¥åé‡ç‚¹å…³æ³¨æ”¶å…¥å¢é•¿ã€‚',
                title: 'AIæŠ•èµ„è¶‹åŠ¿åˆ†æ',
                keywords: ['æŠ•èµ„è¶‹åŠ¿', 'b2b ai', 'ä¼ä¸šçº§åº”ç”¨', 'åœ°ç†åˆ†å¸ƒ', 'è½®æ¬¡åˆ†æ', '2024']
            }
        ];

        // æ··åˆRAGç³»ç»Ÿ
        class SimpleRAGSystem {
            // å…³é”®è¯æå–
            extractKeywords(query) {
                return query.toLowerCase()
                    .replace(/[ï¼Ÿï¼ã€‚ï¼Œ,\s]+/g, ' ')
                    .split(' ')
                    .filter(word => word.length > 1);
            }

            // å…³é”®è¯æ£€ç´¢
            keywordSearch(query) {
                const keywords = this.extractKeywords(query);
                const results = [];

                knowledgeBase.forEach(doc => {
                    let score = 0;
                    let matches = 0;

                    keywords.forEach(keyword => {
                        if (doc.content.toLowerCase().includes(keyword) || 
                            doc.title.toLowerCase().includes(keyword)) {
                            score += 0.5;
                            matches++;
                        }
                        doc.keywords.forEach(docKeyword => {
                            if (docKeyword.includes(keyword)) {
                                score += 0.8;
                                matches++;
                            }
                        });
                    });

                    if (score > 0) {
                        results.push({
                            ...doc,
                            score: score + (matches/keywords.length) * 0.3,
                            strategy: 'keyword',
                            matches: matches
                        });
                    }
                });

                return results.sort((a, b) => b.score - a.score);
            }

            // è¯­ä¹‰æ¨¡å¼åŒ¹é…
            semanticPatternMatch(query) {
                const patterns = {
                    investment: ['æŠ•èµ„', 'èèµ„', 'èµ„é‡‘', 'è½®æ¬¡', 'ä¼°å€¼', 'vc', 'åŸºé‡‘'],
                    company: ['å…¬å¸', 'åˆåˆ›', 'åˆ›ä¸š', 'ä¼ä¸š', 'å›¢é˜Ÿ', 'ç‹¬è§’å…½'],
                    trend: ['è¶‹åŠ¿', 'å¸‚åœº', 'å‘å±•', 'å‰æ™¯', 'é¢„æµ‹', 'æœªæ¥'],
                    technology: ['æŠ€æœ¯', 'ai', 'äººå·¥æ™ºèƒ½', 'ç®—æ³•', 'æ¨¡å‹']
                };

                const queryLower = query.toLowerCase();
                const scores = {};

                for (const [category, keywords] of Object.entries(patterns)) {
                    scores[category] = keywords.reduce((score, keyword) => {
                        return score + (queryLower.includes(keyword) ? 1 : 0);
                    }, 0);
                }

                const bestCategory = Object.entries(scores)
                    .sort(([,a], [,b]) => b - a)[0][0];

                return knowledgeBase.map(doc => ({
                    ...doc,
                    score: 0.7,
                    strategy: 'pattern',
                    category: bestCategory
                }));
            }

            // æ‰§è¡ŒRAGæ£€ç´¢
            performRAG(query) {
                const keywordResults = this.keywordSearch(query);
                const patternResults = this.semanticPatternMatch(query);
                
                // åˆå¹¶å»é‡
                const allResults = [...keywordResults, ...patternResults];
                const unique = [];
                const seen = new Set();

                allResults.forEach(result => {
                    if (!seen.has(result.id)) {
                        seen.add(result.id);
                        unique.push(result);
                    }
                });

                const final = unique.sort((a, b) => b.score - a.score).slice(0, 3);
                
                return {
                    matches: final,
                    sources: final.map(r => r.title),
                    confidence: final.length > 0 ? Math.min(final[0].score, 1.0) : 0
                };
            }

            // ç”Ÿæˆå›å¤
            generateResponse(query, ragContext) {
                if (ragContext.matches.length === 0) {
                    return `å¾ˆæŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°ä¸"${query}"ç›´æ¥ç›¸å…³çš„ä¿¡æ¯ã€‚å»ºè®®æ‚¨å°è¯•æ›´å…·ä½“çš„é—®é¢˜ã€‚`;
                }

                const primaryDoc = ragContext.matches[0];
                let response = `åŸºäºSVTR.AIæ··åˆRAGç³»ç»Ÿåˆ†æï¼Œå…³äº"${query}"çš„ä¸“ä¸šå›ç­”ï¼š\n\n`;
                response += `ğŸ¯ **æ ¸å¿ƒåˆ†æ**ï¼š\n${primaryDoc.content}\n\n`;
                
                if (ragContext.matches.length > 1) {
                    response += `ğŸ“Š **ç›¸å…³ä¿¡æ¯**ï¼š\n`;
                    ragContext.matches.slice(1).forEach((doc, index) => {
                        const preview = doc.content.substring(0, 100) + '...';
                        response += `${index + 1}. **${doc.title}**: ${preview}\n`;
                    });
                    response += '\n';
                }

                response += `---\n**ğŸ“š æ•°æ®æ¥æº**: ${ragContext.sources.join('ã€')}\n`;
                response += `**ğŸ” æ£€ç´¢ç­–ç•¥**: ${ragContext.matches[0].strategy === 'keyword' ? 'å…³é”®è¯åŒ¹é…' : 'è¯­ä¹‰æ¨¡å¼åˆ†æ'}\n`;
                response += `**ğŸ“Š ç½®ä¿¡åº¦**: ${(ragContext.confidence * 100).toFixed(1)}%\n`;
                response += `**ğŸ¤– æŠ€æœ¯**: æ··åˆRAGç³»ç»Ÿ (å…³é”®è¯æ£€ç´¢ + è¯­ä¹‰åŒ¹é…)`;

                return response;
            }
        }

        const ragSystem = new SimpleRAGSystem();

        // æµ‹è¯•åŠŸèƒ½
        function testRAG() {
            const testQuery = 'AnthropicæŠ•èµ„æƒ…å†µ';
            const results = ragSystem.performRAG(testQuery);
            
            document.getElementById('testResults').innerHTML = `
                <div class="query-box">
                    <strong>æµ‹è¯•æŸ¥è¯¢:</strong> "${testQuery}"
                    <div class="result">
                        ğŸ” æ‰¾åˆ° ${results.matches.length} ä¸ªåŒ¹é…æ–‡æ¡£<br>
                        ğŸ“Š ç½®ä¿¡åº¦: ${(results.confidence * 100).toFixed(1)}%<br>
                        ğŸ“š æ¥æº: ${results.sources.join('ã€')}
                    </div>
                </div>
            `;
        }

        function testKeywords() {
            const query = 'AIåˆ›æŠ•å¸‚åœºè¶‹åŠ¿åˆ†æ';
            const keywords = ragSystem.extractKeywords(query);
            
            document.getElementById('testResults').innerHTML = `
                <div class="query-box">
                    <strong>å…³é”®è¯æå–æµ‹è¯•:</strong> "${query}"
                    <div class="result">
                        æå–çš„å…³é”®è¯: ${keywords.join(', ')}
                    </div>
                </div>
            `;
        }

        function testPatterns() {
            const query = 'ä¼ä¸šçº§AIåº”ç”¨æŠ•èµ„æœºä¼š';
            const results = ragSystem.semanticPatternMatch(query);
            
            document.getElementById('testResults').innerHTML = `
                <div class="query-box">
                    <strong>è¯­ä¹‰åŒ¹é…æµ‹è¯•:</strong> "${query}"
                    <div class="result">
                        åŒ¹é…åˆ° ${results.length} ä¸ªæ–‡æ¡£ï¼Œè¯­ä¹‰åˆ†ç±»å®Œæˆ
                    </div>
                </div>
            `;
        }

        // èŠå¤©åŠŸèƒ½
        function chat() {
            const input = document.getElementById('messageInput');
            const messages = document.getElementById('messages');
            const status = document.getElementById('chatStatus');
            
            const query = input.value.trim();
            if (!query) return;

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            messages.innerHTML += `<div class="message user"><strong>æ‚¨:</strong> ${query}</div>`;
            input.value = '';
            status.textContent = 'åˆ†æä¸­...';

            // æ¨¡æ‹Ÿæ€è€ƒå»¶è¿Ÿ
            setTimeout(() => {
                const ragContext = ragSystem.performRAG(query);
                const response = ragSystem.generateResponse(query, ragContext);
                
                messages.innerHTML += `<div class="message ai"><strong>SVTR.AI:</strong> ${response.replace(/\n/g, '<br>')}</div>`;
                messages.scrollTop = messages.scrollHeight;
                status.textContent = 'å°±ç»ª';
            }, 1000);
        }

        function demoQuery(query) {
            document.getElementById('messageInput').value = query;
            chat();
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        window.onload = function() {
            document.getElementById('messageInput').focus();
            console.log('ğŸš€ SVTR.AI æ··åˆRAGç³»ç»Ÿå·²åŠ è½½');
        };
    </script>
</body>
</html>