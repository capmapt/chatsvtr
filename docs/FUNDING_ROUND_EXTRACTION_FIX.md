# èèµ„è½®æ¬¡æå–è§„åˆ™ä¿®å¤å¤ç›˜

## ğŸ“… æ—¶é—´çº¿
**æ—¥æœŸ**: 2025å¹´10æœˆ18æ—¥
**ä¿®å¤æäº¤**: f99e5f19
**æ–‡ä»¶**: [assets/js/funding-daily.js](../assets/js/funding-daily.js) (490-550è¡Œ)

---

## ğŸ¯ é—®é¢˜èƒŒæ™¯

### ç”¨æˆ·åé¦ˆ
AIåˆ›æŠ•æ—¥æŠ¥å³ä¸Šè§’èèµ„è½®æ¬¡æ˜¾ç¤ºå¾ˆå¤š"æœªçŸ¥"ï¼Œå½±å“ç”¨æˆ·ä½“éªŒå’Œæ•°æ®ä»·å€¼ã€‚

### åˆå§‹çŠ¶æ€
- **è¯†åˆ«ç‡**: 75.0% (39/52æ¡è®°å½•)
- **æœªè¯†åˆ«**: 13æ¡ (25.0%)
- **æµ‹è¯•æ•°æ®**: 52æ¡çœŸå®èèµ„è®°å½•

---

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜ä¸€ï¼šå‡½æ•°å‚æ•°å‘½åæ··æ·† Bugï¼ˆé—ç•™é—®é¢˜ï¼‰

**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šå‚æ•°åä¸ºmatchï¼Œä½†è®¿é—®match[0]ä¼šundefined
{
  pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\+?è½®èèµ„/i,
  stage: (match) => {
    const letterMatch = match[0].match(/([A-Z])\+?è½®/i); // match[0] = undefined!
    // ...
  }
}

// è°ƒç”¨æ—¶
const extractedStage = typeof stage === 'function' ? stage(match[0]) : stage;
```

**æ ¹æœ¬åŸå› **:
- è°ƒç”¨ä¼ å…¥çš„æ˜¯ `match[0]`ï¼ˆå­—ç¬¦ä¸²ï¼‰
- ä½†å‡½æ•°å‚æ•°å« `match`ï¼Œå†…éƒ¨åˆè®¿é—® `match[0]`
- å¯¼è‡´ `match[0]` å®é™…æ˜¯å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œåç»­ `.match()` è¿”å›null

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// âœ… æ­£ç¡®ï¼šå‚æ•°åæ”¹ä¸ºmatchedStringï¼Œè¯­ä¹‰æ¸…æ™°
{
  pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\+?è½®èèµ„/i,
  stage: (matchedString) => {
    const letterMatch = matchedString.match(/([A-Z])\+?è½®/i);
    // ...
  }
}
```

---

### é—®é¢˜äºŒï¼šä¸æ”¯æŒA++åŒåŠ å·è½®æ¬¡

**é—®é¢˜ä»£ç **:
```javascript
// âŒ \+? åªåŒ¹é…0ä¸ªæˆ–1ä¸ªåŠ å·ï¼Œæ— æ³•è¯†åˆ«A++
{ pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\+?è½®èèµ„/i, ... }
```

**çœŸå®æ¡ˆä¾‹**:
```
"ç»è‰²é‡å­...å®Œæˆæ•°äº¿å…ƒäººæ°‘å¸A++è½®èèµ„ï¼ˆçº¦æ•°åƒä¸‡ç¾å…ƒï¼‰" âŒ æœªè¯†åˆ«
```

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// âœ… ä½¿ç”¨\+{1,2}åŒ¹é…1-2ä¸ªåŠ å·
{
  pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*\+{1,2}\s*è½®\s*èèµ„/i,
  stage: (matchedString) => {
    const letterMatch = matchedString.match(/([A-Z])\s*(\+{1,2})\s*è½®/i);
    if (letterMatch) {
      const letter = letterMatch[1];
      const plusCount = (letterMatch[2] || '').length; // è®¡ç®—åŠ å·æ•°é‡
      if (plusCount === 2) return `${letter.toUpperCase()}++`;
      if (plusCount === 1) return `${letter.toUpperCase()}+`;
      return `${letter.toUpperCase()}è½®`;
    }
  }
}
```

---

### é—®é¢˜ä¸‰ï¼šä¸æ”¯æŒå¸¦ç©ºæ ¼çš„æ ¼å¼

**é—®é¢˜ä»£ç **:
```javascript
// âŒ æ²¡æœ‰\s*ï¼Œæ— æ³•åŒ¹é…ç©ºæ ¼
{ pattern: /å®Œæˆ[^ã€‚]*?([A-Z])è½®èèµ„/i, ... }
```

**çœŸå®æ¡ˆä¾‹**:
```
"Ecorobotix...å®Œæˆ 1.05 äº¿ç¾å…ƒ D è½® èèµ„" âŒ æœªè¯†åˆ«
"Liberate...å®Œæˆ 5000 ä¸‡ç¾å…ƒ B è½® èèµ„" âŒ æœªè¯†åˆ«
"çˆ±è¯—ç§‘æŠ€...å®Œæˆ B+ è½® èèµ„ 1 äº¿å…ƒäººæ°‘å¸" âŒ æœªè¯†åˆ«
```

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// âœ… åœ¨æ‰€æœ‰å…³é”®ä½ç½®æ·»åŠ \s*åŒ¹é…å¯é€‰ç©ºæ ¼
{ pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*è½®\s*èèµ„/i, ... }
{ pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*\+{1,2}\s*è½®\s*èèµ„/i, ... }
```

---

## âœ… æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

### å®Œæ•´ä»£ç å®ç°

```javascript
const currentRoundPatterns = [
  // æ—©æœŸè½®æ¬¡
  { pattern: /å®Œæˆ[^ã€‚]*?ç§å­å‰/, stage: 'Pre-seed' },
  { pattern: /å®Œæˆ[^ã€‚]*?å¤©ä½¿è½®|å®Œæˆ[^ã€‚]*?å¤©ä½¿/, stage: 'Seed' },
  { pattern: /å®Œæˆ[^ã€‚]*?ç§å­è½®/, stage: 'Seed' },

  // æ ‡å‡†è½®æ¬¡ (A-Zè½®ï¼Œæ”¯æŒ+ ++å·) - å¢å¼ºç‰ˆï¼šæ”¯æŒ"å®Œæˆ2,300ä¸‡ç¾å…ƒAè½®èèµ„"ã€"A++è½®"ã€"B+ è½®"(å¸¦ç©ºæ ¼)
  {
    pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*\+{1,2}\s*è½®\s*èèµ„/i,
    stage: (matchedString) => {
      const letterMatch = matchedString.match(/([A-Z])\s*(\+{1,2})\s*è½®/i);
      if (letterMatch) {
        const letter = letterMatch[1];
        const plusCount = (letterMatch[2] || '').length;
        if (plusCount === 2) return `${letter.toUpperCase()}++`;
        if (plusCount === 1) return `${letter.toUpperCase()}+`;
        return `${letter.toUpperCase()}è½®`;
      }
      return 'Unknown';
    }
  },

  // æ— åŠ å·çš„æ ‡å‡†è½®æ¬¡ (æ”¯æŒ"D è½® èèµ„"è¿™ç§å¸¦ç©ºæ ¼çš„æ ¼å¼)
  {
    pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*è½®\s*èèµ„/i,
    stage: (matchedString) => {
      const letterMatch = matchedString.match(/([A-Z])\s*è½®/i);
      if (letterMatch) {
        return `${letterMatch[1].toUpperCase()}è½®`;
      }
      return 'Unknown';
    }
  },

  // ç‰¹æ®Šèèµ„ç±»å‹
  { pattern: /å®Œæˆ[^ã€‚]*?SAFEè½®/i, stage: 'SAFE' },
  { pattern: /å®Œæˆ[^ã€‚]*?å¯è½¬å€º|å®Œæˆ[^ã€‚]*?å¯è½¬æ¢å€ºåˆ¸/, stage: 'å¯è½¬å€º' },
  { pattern: /å®Œæˆ[^ã€‚]*?æˆ˜ç•¥æŠ•èµ„|å®Œæˆ[^ã€‚]*?æˆ˜ç•¥èèµ„/, stage: 'Strategic' },
  { pattern: /å®Œæˆ[^ã€‚]*?IPO|å®Œæˆ[^ã€‚]*?ä¸Šå¸‚/, stage: 'IPO' },
  { pattern: /å®Œæˆ[^ã€‚]*?å¹¶è´­|å®Œæˆ[^ã€‚]*?æ”¶è´­/, stage: 'M&A' },
];
```

### å…³é”®æŠ€æœ¯è¦ç‚¹

1. **å‚æ•°å‘½åè§„èŒƒ**: ä½¿ç”¨ `matchedString` ä»£æ›¿ `match` é¿å…æ··æ·†
2. **åŠ å·æ•°é‡æ£€æµ‹**: é€šè¿‡ `letterMatch[2].length` åˆ¤æ–­æ˜¯ `+` è¿˜æ˜¯ `++`
3. **ç©ºæ ¼å®¹é”™**: æ‰€æœ‰å…³é”®ç¬¦å·å‰ååŠ  `\s*` åŒ¹é…å¯é€‰ç©ºæ ¼
4. **æ¨¡å¼åˆ†ç¦»**: å°†åŠ å·è½®æ¬¡å’Œæ— åŠ å·è½®æ¬¡åˆ†æˆä¸¤ä¸ªç‹¬ç«‹æ¨¡å¼ï¼Œæé«˜åŒ¹é…ç²¾åº¦

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### å®šé‡å¯¹æ¯”

| æŒ‡æ ‡ | ä¿®å¤å‰ | ä¿®å¤å | æå‡ |
|------|--------|--------|------|
| **è¯†åˆ«ç‡** | 75.0% (39/52) | **90.4% (47/52)** | **+15.4%** |
| **æœªè¯†åˆ«æ•°** | 13æ¡ | **5æ¡** | **-61.5%** |
| **è¯†åˆ«æ–¹æ³•** | 37æ¡å®Œæˆæ¨¡å¼ | **46æ¡å®Œæˆæ¨¡å¼** | +9æ¡ |

### æ–°å¢è¯†åˆ«èƒ½åŠ›

ä¿®å¤åæˆåŠŸè¯†åˆ«çš„æ¡ˆä¾‹ï¼š
- âœ… **A++è½®**: "ç»è‰²é‡å­...å®Œæˆæ•°äº¿å…ƒäººæ°‘å¸A++è½®èèµ„"
- âœ… **B+è½®**: "çˆ±è¯—ç§‘æŠ€...å®Œæˆ B+ è½®èèµ„ 1 äº¿å…ƒäººæ°‘å¸"
- âœ… **å¸¦ç©ºæ ¼çš„Dè½®**: "Ecorobotix...å®Œæˆ 1.05 äº¿ç¾å…ƒ D è½® èèµ„"
- âœ… **å¸¦ç©ºæ ¼çš„Bè½®**: "Liberate...å®Œæˆ 5000 ä¸‡ç¾å…ƒ B è½® èèµ„"
- âœ… **å¸¦ç©ºæ ¼çš„Aè½®**: "Launchpad...å®Œæˆ 1100 ä¸‡ç¾å…ƒ A è½® èèµ„"

### è½®æ¬¡åˆ†å¸ƒç»Ÿè®¡

```
âœ… Aè½®: 14æ¡ (26.9%)
âœ… ç§å­è½®: 13æ¡ (25.0%)
âœ… Bè½®: 6æ¡ (11.5%)
â“ æœªçŸ¥: 5æ¡ (9.6%) â† åˆç†æƒ…å†µ
âœ… Dè½®: 4æ¡ (7.7%)
âœ… Cè½®: 4æ¡ (7.7%)
âœ… ç§å­å‰: 2æ¡ (3.8%)
âœ… Pre-Aè½®: 1æ¡ (1.9%)
âœ… A++: 1æ¡ (1.9%)
âœ… Eè½®: 1æ¡ (1.9%)
âœ… B+: 1æ¡ (1.9%)
```

---

## ğŸ¯ å‰©ä½™æœªè¯†åˆ«æ¡ˆä¾‹åˆ†æ

### åˆç†çš„"æœªçŸ¥"æƒ…å†µï¼ˆ5æ¡ï¼‰

è¿™äº›è®°å½•**ç¡®å®æ— æ³•æå–**ï¼Œå› ä¸ºæºæ–‡æœ¬æœ¬èº«æ²¡æœ‰è½®æ¬¡ä¿¡æ¯ï¼š

```javascript
// æ¡ˆä¾‹1: åªæåˆ°é‡‘é¢ï¼Œæ²¡æœ‰è½®æ¬¡
"ÅŒURA...å®Œæˆ9äº¿ç¾å…ƒèèµ„ï¼ŒæŠ•èµ„æ–¹ä¸ºFidelity..."
// âŒ æ— è½®æ¬¡æ ‡è¯† â†’ "æœªçŸ¥"æ˜¯æ­£ç¡®çš„

// æ¡ˆä¾‹2-5: åŒæ ·æƒ…å†µ
"OneImaging...å®Œæˆ3800ä¸‡ç¾å…ƒèèµ„"
"Altitude...å®Œæˆ540ä¸‡ç¾å…ƒèèµ„"
"Isentroniq...å®Œæˆ870ä¸‡ç¾å…ƒèèµ„"
"Strawberry...å®Œæˆ600ä¸‡ç¾å…ƒèèµ„"
```

**ç»“è®º**: è¿™5æ¡"æœªçŸ¥"æ˜¯**æ•°æ®æºæœ¬èº«çš„é™åˆ¶**ï¼Œä¸æ˜¯æå–è§„åˆ™çš„é—®é¢˜ã€‚å·²è¾¾åˆ°æœ€ä¼˜çŠ¶æ€ã€‚

---

## ğŸš€ éƒ¨ç½²ä¸éªŒè¯

### éƒ¨ç½²æµç¨‹

```bash
# 1. æœ¬åœ°æµ‹è¯•
node test-stage-extraction.js
# âœ… è¾“å‡ºï¼šè¯†åˆ«ç‡ 90.4% (47/52)

# 2. æäº¤ä»£ç 
git add assets/js/funding-daily.js test-stage-extraction.js
git commit -m "fix: improve funding round extraction from 75% to 90.4%"
git push origin main

# 3. éƒ¨ç½²åˆ°ç”Ÿäº§
npx wrangler pages deploy . --project-name chatsvtr --commit-dirty=true
# âœ… éƒ¨ç½²æˆåŠŸ: https://5c3c6c41.chatsvtr.pages.dev
```

### éªŒè¯æ–¹æ³•

```bash
# æ£€æŸ¥ç”Ÿäº§ä»£ç 
curl -s https://5c3c6c41.chatsvtr.pages.dev/assets/js/funding-daily.js | grep -A 3 "æ ‡å‡†è½®æ¬¡"

# âœ… è¾“å‡ºåŒ…å«æ–°ä»£ç :
# { pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*\+{1,2}\s*è½®\s*èèµ„/i, ...
```

### éƒ¨ç½²ç¡®è®¤

- **Commit**: f99e5f19
- **éƒ¨ç½²URL**: https://5c3c6c41.chatsvtr.pages.dev
- **ç”Ÿäº§éªŒè¯**: âœ… å·²åŒ…å«æ‰€æœ‰ä¿®å¤
- **ç”¨æˆ·è®¿é—®**: https://svtr.ai (å·²è‡ªåŠ¨æ›´æ–°)

---

## ğŸ“š ç»éªŒæ€»ç»“

### æ ¸å¿ƒæ•™è®­

1. **å‚æ•°å‘½åå¾ˆé‡è¦**: `match` vs `matchedString` çš„æ··æ·†å¯¼è‡´ä¸¥é‡bug
2. **æ­£åˆ™è¦è€ƒè™‘å˜ä½“**: ä¸­æ–‡æ–‡æœ¬ä¸­ç©ºæ ¼æ˜¯å¸¸è§å¹²æ‰°å› ç´ 
3. **æµ‹è¯•æ•°æ®çœŸå®æ€§**: ä½¿ç”¨çœŸå®ç”Ÿäº§æ•°æ®æµ‹è¯•æ¯”æ„é€ æ•°æ®æ›´æœ‰æ•ˆ
4. **é€æ­¥ä¼˜åŒ–ç­–ç•¥**: 75% â†’ 78.8% â†’ 90.4% åˆ†é˜¶æ®µè§£å†³é—®é¢˜
5. **åˆç†çš„é™åˆ¶**: ä¸æ˜¯æ‰€æœ‰"æœªçŸ¥"éƒ½èƒ½è§£å†³ï¼Œæ•°æ®æºæœ¬èº«çš„é™åˆ¶è¦æ¥å—

### æœ€ä½³å®è·µ

```javascript
// âœ… å¥½çš„æ­£åˆ™æ¨¡å¼è®¾è®¡
{
  pattern: /å®Œæˆ[^ã€‚]*?([A-Z])\s*\+{1,2}\s*è½®\s*èèµ„/i,
  stage: (matchedString) => { // æ¸…æ™°çš„å‚æ•°å
    const letterMatch = matchedString.match(/([A-Z])\s*(\+{1,2})\s*è½®/i);
    if (letterMatch) {
      const letter = letterMatch[1];
      const plusCount = (letterMatch[2] || '').length; // æ˜ç¡®çš„è®¡æ•°é€»è¾‘
      // æ¸…æ™°çš„æ¡ä»¶åˆ¤æ–­
      if (plusCount === 2) return `${letter}++`;
      if (plusCount === 1) return `${letter}+`;
      return `${letter}è½®`;
    }
    return 'Unknown'; // æ˜ç¡®çš„å¤±è´¥è¿”å›
  }
}
```

### æ­£åˆ™è¡¨è¾¾å¼è®¾è®¡åŸåˆ™

1. **ç©ºæ ¼å®¹å¿**: åœ¨ä¸­æ–‡æ–‡æœ¬ä¸­ï¼Œå…³é”®ç¬¦å·å‰ååŠ  `\s*`
2. **æ˜ç¡®é‡è¯**: ä½¿ç”¨ `{1,2}` è€Œä¸æ˜¯ `?`ï¼Œæ›´ç²¾ç¡®
3. **æ•è·åˆ†ç»„**: åˆ†åˆ«æ•è·å­—æ¯å’ŒåŠ å·ï¼Œæ–¹ä¾¿åç»­å¤„ç†
4. **æ¨¡å¼ä¼˜å…ˆçº§**: å…ˆåŒ¹é…ç‰¹å®šæ ¼å¼ï¼Œå†åŒ¹é…é€šç”¨æ ¼å¼

---

## ğŸ”— ç›¸å…³æ–‡ä»¶

- **ä¸»ä»£ç **: [assets/js/funding-daily.js](../assets/js/funding-daily.js#L490-L550)
- **æµ‹è¯•è„šæœ¬**: [test-stage-extraction.js](../test-stage-extraction.js)
- **æäº¤è®°å½•**: f99e5f19
- **æ•°æ®æº**: [assets/data/funding-daily.json](../assets/data/funding-daily.json)

---

## âœ¨ ç»“è®º

é€šè¿‡ç³»ç»ŸåŒ–åˆ†æå’Œä¸‰é˜¶æ®µä¼˜åŒ–ï¼ŒæˆåŠŸå°†èèµ„è½®æ¬¡è¯†åˆ«ç‡ä» **75%** æå‡è‡³ **90.4%**ï¼Œå‰©ä½™ **9.6%** çš„æœªè¯†åˆ«æƒ…å†µéƒ½æ˜¯åˆç†çš„æ•°æ®æºé™åˆ¶ã€‚è¯¥ä¼˜åŒ–æ˜¾è‘—æå‡äº†AIåˆ›æŠ•æ—¥æŠ¥çš„æ•°æ®è´¨é‡å’Œç”¨æˆ·ä½“éªŒã€‚

**å…³é”®æˆæœ**:
- âœ… æ”¯æŒ A++/B+ ç­‰åŠ å·è½®æ¬¡
- âœ… å…¼å®¹å¸¦ç©ºæ ¼çš„ä¸­æ–‡æ ¼å¼
- âœ… ä¿®å¤å‡½æ•°å‚æ•°å‘½åbug
- âœ… å·²éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
- âœ… å®Œæ•´æµ‹è¯•å’Œæ–‡æ¡£

---

*æœ€åæ›´æ–°: 2025å¹´10æœˆ18æ—¥*
*ä½œè€…: Claude Code*
*ç‰ˆæœ¬: v2.0 - 90.4%è¯†åˆ«ç‡*
