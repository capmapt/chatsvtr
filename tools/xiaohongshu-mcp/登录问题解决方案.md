# 小红书MCP登录问题解决方案

## 问题说明
Windows Defender将`leakless.exe`(浏览器自动化组件)标记为潜在威胁，导致登录工具无法正常运行。

## 解决方法

### 方法1: Windows Defender白名单设置(推荐)

1. **打开Windows安全中心**
   - 按下 `Win + I` 打开设置
   - 选择"更新和安全" > "Windows安全中心"
   - 点击"病毒和威胁防护"

2. **添加排除项**
   - 点击"管理设置"(在病毒和威胁防护设置下)
   - 向下滚动找到"排除项"
   - 点击"添加或删除排除项"
   - 选择"添加排除项" > "文件夹"
   - 添加路径: `C:\Users\lium\AppData\Local\Temp\`

3. **重新运行登录工具**
   ```bash
   cd /c/Projects/chatsvtr/tools/xiaohongshu-mcp
   ./xiaohongshu-login.exe
   ```

### 方法2: 临时禁用实时保护

1. **临时关闭实时保护**
   - 在Windows安全中心 > 病毒和威胁防护
   - 点击"管理设置"
   - 将"实时保护"切换为关闭(只是临时的)

2. **运行登录工具**
   ```bash
   ./xiaohongshu-login.exe
   ```

3. **完成后重新开启实时保护**

### 方法3: 使用PowerShell绕过(高级用户)

```powershell
# 以管理员身份运行PowerShell
Set-MpPreference -DisableRealtimeMonitoring $true
cd C:\Projects\chatsvtr\tools\xiaohongshu-mcp
.\xiaohongshu-login.exe
Set-MpPreference -DisableRealtimeMonitoring $false
```

## 登录流程

1. **启动登录工具**
   ```bash
   ./xiaohongshu-login.exe
   ```

2. **扫码登录**
   - 工具会自动打开浏览器窗口
   - 显示小红书二维码
   - 使用小红书App扫码登录

3. **确认登录成功**
   - 看到"登录成功"提示
   - 会生成`cookies.json`文件保存登录状态

4. **测试MCP功能**
   ```bash
   # 检查登录状态
   curl -X POST http://localhost:18060/mcp -H "Content-Type: application/json" -d '{"jsonrpc": "2.0", "id": 1, "method": "tools/call", "params": {"name": "check_login_status", "arguments": {}}}'
   ```

## 注意事项

- 登录状态会保存在`cookies.json`文件中
- 如果长时间未使用，可能需要重新登录
- 建议定期备份cookies文件
- 使用过程中注意小红书的使用限制

## MCP服务器状态

✅ xiaohongshu-mcp服务器已启动 (端口: 18060)
✅ Claude Code MCP集成已配置
⏳ 等待完成小红书账号登录

完成登录后即可使用所有小红书MCP功能！