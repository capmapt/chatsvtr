<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>SVTR Stats Widget</title>
<link rel="canonical" href="https://svtr.ai/pages/stats-widget.html">
<meta property="og:url" content="https://svtr.ai/pages/stats-widget.html">
<style>
/* === 优化的统一基础样式 === */
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  font-family:Arial,"Microsoft YaHei",sans-serif;
  overflow:hidden;
  height:auto;
  min-height:100%;
  width:100%;
  background:transparent;
  margin:0;
  padding:0;
}
body{display:flex;align-items:center;justify-content:center;min-height:0;}

/* 🎯 统一布局：消除滚动条 */
.stats-container{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:15px;
  width:100%;
  max-width:800px;
  margin:0 auto;
  padding:15px;
  box-sizing:border-box;
}

/* 统一卡片样式 */
.stat-card{
  position:relative;
  text-align:center;
  background:#fff;
  padding:20px 15px;
  border-radius:12px;
  text-decoration:none;
  color:inherit;
  box-shadow:0 6px 18px rgba(0,0,0,.06);
  transition:.3s;
  width:100%;
  min-width:0;
  box-sizing:border-box;
  overflow:hidden;
}

.stat-card:hover{transform:translateY(-3px);box-shadow:0 10px 24px rgba(0,0,0,.10);}

.stat-icon{
  font-size:2.5rem;
  margin-bottom:12px;
  transition: transform 0.3s ease, filter 0.3s ease;
  cursor: pointer;
  position: relative;
}

.stat-icon:hover {
  transform: scale(1.1) rotate(5deg);
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
}

/* 不同类别的图标动画 */
.members .stat-icon{
  animation: pulse-members 3s infinite ease-in-out;
}

.companies .stat-icon{
  animation: float-companies 4s infinite ease-in-out;
}

.vip .stat-icon{
  animation: glow-vip 2.5s infinite ease-in-out alternate;
}

@keyframes pulse-members {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes float-companies {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  25% { transform: translateY(-3px) rotate(2deg); }
  75% { transform: translateY(3px) rotate(-2deg); }
}

@keyframes glow-vip {
  0% { 
    filter: drop-shadow(0 0 5px gold) brightness(1);
    transform: scale(1);
  }
  100% { 
    filter: drop-shadow(0 0 15px gold) brightness(1.2);
    transform: scale(1.03);
  }
}

.stat-number{
  font-size:2rem;
  font-weight:700;
  color:#2d3436;
  margin-bottom:8px;
  word-wrap:break-word;
  overflow-wrap:break-word;
}

.stat-label{
  font-size:0.95rem;
  color:#636e72;
  margin-bottom:12px;
  line-height:1.3;
  word-wrap:break-word;
  overflow-wrap:break-word;
  hyphens:auto;
  text-overflow:ellipsis;
}

.progress-bar{
  height:5px;
  background:#ddd;
  border-radius:3px;
  overflow:hidden;
  margin-bottom:10px;
}

.progress-fill{height:100%;width:100%;transform-origin:left;transition:transform 1.5s ease-out;border-radius:3px;transform:scaleX(0)}
.members .progress-fill{background:linear-gradient(45deg,#ff6b6b,#ff8e53);box-shadow:0 0 8px rgba(255,107,107,0.3)}
.companies .progress-fill{background:linear-gradient(45deg,#4285f4,#64b5f6);box-shadow:0 0 6px rgba(66,133,244,0.3)}
.vip .progress-fill{background:linear-gradient(45deg,#26de81,#20bf6b);box-shadow:0 0 4px rgba(38,222,129,0.3)}

.live-indicator{
  position:absolute;
  top:12px;
  right:12px;
  font-size:.7rem;
  color:#00b894;
  display:flex;
  align-items:center;
  gap:3px;
}

.live-dot{
  width:6px;
  height:6px;
  border-radius:50%;
  background:#00b894;
  animation:blink 1s infinite
}

@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:.35}}

.growth-indicator{
  font-size:.75rem;
  color:#00b894;
  font-weight:500;
  display:flex;
  justify-content:center;
  gap:3px;
  margin-bottom:0;
}


.increase-animation{animation:flash .5s}
@keyframes flash{0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)}}

/* 动态数字动画效果 */
.stat-number{
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: glow 2s ease-in-out infinite alternate;
  position: relative;
}

@keyframes glow {
  0% {
    text-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
    transform: scale(1);
  }
  100% {
    text-shadow: 0 0 10px rgba(118, 75, 162, 0.5);
    transform: scale(1.02);
  }
}

.stat-number::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  transform: translateX(-100%);
  animation: shimmer 3s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* 🎯 手机端专门优化 - 完全居中无空白 */
@media (max-width: 768px) {
  html,body{
    height:auto !important;
    min-height:0 !important;
    margin:0 !important;
    padding:0 !important;
  }
  body{
    display:flex !important;
    align-items:center !important;
    justify-content:center !important;
    min-height:0 !important;
    padding:0 !important;
  }
  .stats-container{
    gap:4px;
    padding:10px 4px !important;
    margin:0 auto !important;
    grid-template-columns:repeat(3, 1fr); /* 保持三列横排 */
    max-width:100%;
    width:100%;
    height:auto;
    display:grid;
    align-items:center;
    justify-content:center;
  }
  .stat-card{
    padding:15px 8px;
    border-radius:10px;
    text-align:center;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    min-height:110px; /* 足够的高度 */
    font-size:1rem;
  }
  .stat-icon{
    font-size:2.2rem; /* 更大的图标 */
    margin-bottom:8px;
    margin-right:0;
  }
  .stat-number{
    font-size:1.6rem; /* 更大的数字 */
    margin-bottom:5px;
    font-weight:700;
    line-height:1.1;
  }
  .stat-label{
    font-size:0.85rem; /* 更大的标签 */
    margin-bottom:0;
    line-height:1.2;
    font-weight:500;
    word-break:keep-all;
    white-space:nowrap;
  }
  .progress-bar{height:3px;margin-bottom:4px}
  .growth-indicator{font-size:0.7rem}
  .live-indicator{font-size:0.6rem;top:6px;right:6px}
  .live-dot{width:4px;height:4px}
}

@media (max-width: 480px) {
  html,body{
    height:auto !important;
    min-height:0 !important;
    margin:0 !important;
    padding:0 !important;
  }
  body{
    display:flex !important;
    align-items:center !important;
    justify-content:center !important;
    min-height:0 !important;
    padding:0 !important;
  }
  .stats-container{
    gap:3px;
    padding:8px 3px !important;
    margin:0 auto !important;
    grid-template-columns:repeat(3, 1fr); /* 保持三列横排 */
    max-width:100%;
    width:100%;
    display:grid;
    align-items:center;
    justify-content:center;
  }
  .stat-card{
    padding:12px 6px;
    border-radius:8px;
    text-align:center;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    min-height:95px; /* 足够的高度 */
    font-size:0.85rem;
  }
  .stat-icon{
    font-size:1.8rem; /* 更大的图标 */
    margin-bottom:6px;
    margin-right:0;
  }
  .stat-number{
    font-size:1.3rem; /* 更大的数字 */
    margin-bottom:4px;
    font-weight:700;
    line-height:1.1;
  }
  .stat-label{
    font-size:0.75rem; /* 更大的标签 */
    margin-bottom:0;
    line-height:1.1;
    font-weight:500;
    word-break:keep-all;
    white-space:nowrap;
  }
  .progress-bar{height:3px;margin-bottom:3px}
  .growth-indicator{font-size:0.65rem}
  .live-indicator{font-size:0.55rem;top:4px;right:4px}
  .live-dot{width:3px;height:3px}
}

@media (max-width: 375px) {
  html,body{
    height:auto !important;
    min-height:0 !important;
    margin:0 !important;
    padding:0 !important;
  }
  body{
    display:flex !important;
    align-items:center !important;
    justify-content:center !important;
    min-height:0 !important;
    padding:0 !important;
  }
  .stats-container{
    gap:2px;
    padding:6px 2px !important;
    margin:0 auto !important;
    grid-template-columns:repeat(3, 1fr); /* 保持三列横排 */
    max-width:100%;
    width:100%;
    display:grid;
    align-items:center;
    justify-content:center;
  }
  .stat-card{
    padding:10px 4px;
    border-radius:6px;
    text-align:center;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    min-height:85px; /* 足够的高度 */
    font-size:0.8rem;
  }
  .stat-icon{
    font-size:1.6rem; /* 更大的图标 */
    margin-bottom:4px;
    margin-right:0;
  }
  .stat-number{
    font-size:1.1rem; /* 更大的数字 */
    margin-bottom:3px;
    font-weight:700;
    line-height:1;
  }
  .stat-label{
    font-size:0.7rem; /* 更大的标签 */
    margin-bottom:0;
    line-height:1.1;
    font-weight:500;
    word-break:keep-all;
    white-space:nowrap;
  }
  .progress-bar{height:2px;margin-bottom:2px}
  .growth-indicator{font-size:0.6rem}
  .live-indicator{font-size:0.5rem;top:3px;right:3px}
  .live-dot{width:3px;height:3px}
}
</style>
</head>

<body>
<div class="stats-container">
  <a class="stat-card members" href="https://c0uiiy15npu.feishu.cn/share/base/form/shrcnKdKrgumC9OtjQNXiC05r8e" target="_blank">
    <div class="stat-icon" aria-label="社区成员">🌐</div>
    <div class="content">
      <div class="stat-number" id="members-count">121,884</div>
      <div class="stat-label" data-i18n="members">社区成员</div>
    </div>
  </a>

  <a class="stat-card companies" href="https://svtrglobal.feishu.cn/share/base/form/shrcns9hbiX7uVmxdJjULKh39rh" target="_blank">
    <div class="stat-icon" aria-label="创业公司">🚀</div>
    <div class="content">
      <div class="stat-number" id="companies-count">5,058</div>
      <div class="stat-label" data-i18n="companies">创业公司</div>
    </div>
  </a>

  <a class="stat-card vip" href="https://svtrglobal.feishu.cn/share/base/form/shrcns9hbiX7uVmxdJjULKh39rh" target="_blank">
    <div class="stat-icon" aria-label="投资网络">💰</div>
    <div class="content">
      <div class="stat-number" id="vip-count">1,102</div>
      <div class="stat-label" data-i18n="vip">投资网络</div>
    </div>
  </a>
</div><script>
/* === 优化的高性能脚本 + 动态数字动画 === */
const stats={members:{c:121884,g:25,m:150000},companies:{c:5058,g:8,m:20000},vip:{c:1102,g:3,m:2000}};
const translations={
  'zh-CN':{live:'实时',members:'全球会员',companies:'创业公司',vip:'投资网络',perHour:'/小时'},
  'en':{live:'Live',members:'Members',companies:'Startups',vip:'Investors',perHour:'/hour'}
};
let currentLang='zh-CN',elements={};

// 增强的DOM元素缓存
function cacheElements(){
  elements={
    statsContainer:document.querySelector('.stats-container'),
    membersCount:document.getElementById('members-count'),
    companiesCount:document.getElementById('companies-count'),
    vipCount:document.getElementById('vip-count'),
    labels:document.querySelectorAll('.stat-label'),
    icons:document.querySelectorAll('.stat-icon'),
    cards:document.querySelectorAll('.stat-card')
  };
}

function updateLang(lang){
  if(!translations[lang])lang='zh-CN';
  currentLang=lang;
  document.documentElement.lang=lang;
  const t=translations[lang];
  
  // 重新获取元素以确保最新
  const labels = document.querySelectorAll('.stat-label');
  const icons = document.querySelectorAll('.stat-icon');
  
  // 更新标签文本
  if(labels && labels.length >= 3) {
    labels[0].textContent = t.members;
    labels[1].textContent = t.companies;
    labels[2].textContent = t.vip;
  }
  
  // 更新图标属性
  if(icons && icons.length >= 3) {
    icons[0].setAttribute('aria-label', t.members);
    icons[1].setAttribute('aria-label', t.companies);
    icons[2].setAttribute('aria-label', t.vip);
  }
  
  paint();
}

function paint(){
  const t=translations[currentLang];
  animateNumber(elements.membersCount, stats.members.c);
  animateNumber(elements.companiesCount, stats.companies.c);
  animateNumber(elements.vipCount, stats.vip.c);
}

// 数字动画函数 - 模仿TRON网站效果
function animateNumber(element, targetValue) {
  const currentValue = parseInt(element.textContent.replace(/,/g, '')) || 0;
  const duration = 2000; // 2秒动画
  const startTime = Date.now();
  const difference = targetValue - currentValue;
  
  function updateNumber() {
    const elapsed = Date.now() - startTime;
    const progress = Math.min(elapsed / duration, 1);
    
    // 使用缓动函数创建更平滑的动画
    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
    const current = Math.floor(currentValue + (difference * easeOutQuart));
    
    element.textContent = current.toLocaleString();
    
    if (progress < 1) {
      requestAnimationFrame(updateNumber);
    } else {
      element.textContent = targetValue.toLocaleString();
    }
  }
  
  requestAnimationFrame(updateNumber);
}

// 连续增长动画 - 模拟实时增长（不同类别不同频率）
function continuousGrowth() {
  const now = Date.now();
  
  // 社区成员: 每3-8秒增长
  if (now - (stats.members.lastUpdate || 0) > (3000 + Math.random() * 5000)) {
    const increment = Math.floor(Math.random() * 5) + 1; // 1-5个
    stats.members.c = Math.min(stats.members.c + increment, stats.members.m);
    stats.members.lastUpdate = now;
    animateNumber(elements.membersCount, stats.members.c);
  }
  
  // 创业公司: 每1-5分钟增长
  if (now - (stats.companies.lastUpdate || 0) > (60000 + Math.random() * 240000)) { // 1-5分钟
    const increment = Math.floor(Math.random() * 2) + 1; // 1-2个
    stats.companies.c = Math.min(stats.companies.c + increment, stats.companies.m);
    stats.companies.lastUpdate = now;
    animateNumber(elements.companiesCount, stats.companies.c);
  }
  
  // 投资机构: 每1-5分钟增长
  if (now - (stats.vip.lastUpdate || 0) > (60000 + Math.random() * 240000)) { // 1-5分钟
    const increment = Math.floor(Math.random() * 1) + 1; // 最多1个
    stats.vip.c = Math.min(stats.vip.c + increment, stats.vip.m);
    stats.vip.lastUpdate = now;
    animateNumber(elements.vipCount, stats.vip.c);
  }
}

function flash(el){el.classList.add('increase-animation');setTimeout(()=>el.classList.remove('increase-animation'),500)}

// 移除了进度条相关函数，因为已经从 HTML 中删除

// 高性能连续增长动画系统
let animationFrameId;

function startContinuousAnimation() {
  function animate() {
    continuousGrowth(); // 各类别独立检查时间
    animationFrameId = requestAnimationFrame(animate);
  }
  
  animate();
}

function stopContinuousAnimation() {
  if (animationFrameId) {
    cancelAnimationFrame(animationFrameId);
    animationFrameId = null;
  }
}

// 初始化和清理
function init(){
  cacheElements();
  const params=new URLSearchParams(location.search);
  const lang = params.get('lang')||'zh-CN';
  
  // 确保DOM就绪后再更新语言
  setTimeout(() => {
    updateLang(lang);
  }, 100);
  
  // 启动连续数字增长动画
  startContinuousAnimation();
  adjustIframeHeight();
}

function cleanup(){
  stopContinuousAnimation();
}

// 优化的iframe高度调整（手机端完全贴合内容）
let cachedHeight=0;
function adjustIframeHeight(){
  const container=elements.statsContainer||document.querySelector('.stats-container');
  if(!container)return;

  const isMobile=window.innerWidth<=768;

  if(isMobile){
    // 手机端：完全贴合内容高度，无任何额外空白
    const containerHeight=container.getBoundingClientRect().height;
    const calculatedHeight=Math.ceil(containerHeight);

    // 避免重复发送相同高度
    if(cachedHeight===calculatedHeight)return;
    cachedHeight=calculatedHeight;

    window.parent.postMessage({type:'adjustHeight',height:calculatedHeight},'*');
  } else {
    // 桌面端：保持原有逻辑
    const containerHeight=container.scrollHeight;
    const bodyPadding=parseInt(getComputedStyle(document.body).padding)*2;
    const finalHeight=containerHeight+bodyPadding+20;
    const calculatedHeight=Math.max(finalHeight,120);

    if(cachedHeight===calculatedHeight)return;
    cachedHeight=calculatedHeight;

    window.parent.postMessage({type:'adjustHeight',height:calculatedHeight},'*');
  }
}

// 优化的事件监听器
const eventHandlers={
  message:e=>{
    if(e.data?.type==='setLang')updateLang(e.data.lang);
    if(e.data?.type==='requestHeight')adjustIframeHeight();
  },
  load:init,
  resize:adjustIframeHeight,
  beforeunload:cleanup,
  visibilitychange:()=>{
    if(document.visibilityState==='visible'){
      paint();
      startContinuousAnimation();
    } else {
      stopContinuousAnimation();
    }
  }
};

// 统一事件绑定
Object.entries(eventHandlers).forEach(([event,handler])=>{
  const target=event==='load'||event==='resize'||event==='beforeunload'||event==='message'?window:document;
  target.addEventListener(event,handler,{passive:true});
});</script></body></html>
