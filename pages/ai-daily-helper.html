<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ—¥æŠ¥åŠ©æ‰‹ - ChatSVTR</title>
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
    <meta name="description" content="å¿«é€Ÿç”Ÿæˆä¸“ä¸šçš„AIåˆ›æŠ•æ—¥æŠ¥ï¼Œæå‡å†…å®¹åˆ¶ä½œæ•ˆç‡">
    <style>
        :root {
            --primary-color: #FA8C32;
            --secondary-color: #FFBB33;
            --bg-main: linear-gradient(135deg, #fff8e1, #ffe0b2);
            --bg-panel: #FFF;
            --text-primary: #333;
            --text-secondary: #666;
            --border-color: #ddd;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
            --radius: 8px;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 20px 20px 20px 260px; /* ä¸ºsidebarç•™å‡º240px+20pxç©ºé—´ */
            background: var(--bg-main);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            position: relative;
            z-index: 1100; /* é«˜äºsidebarçš„z-index: 1050 */
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 1100;
            background: var(--bg-main);
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--bg-panel);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .header h1 {
            margin: 0 0 0.5rem;
            color: var(--primary-color);
            font-size: 2.5rem;
            font-weight: 700;
        }

        .header p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .input-panel, .output-panel {
            background: var(--bg-panel);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .panel-title {
            margin: 0 0 1.5rem;
            color: var(--primary-color);
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: #e67e22;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--text-secondary);
        }

        .btn-secondary:hover {
            background: #555;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .output-text {
            background: #f8f9fa;
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.5rem;
            min-height: 300px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .news-item {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .news-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .news-item-title {
            font-weight: 600;
            color: var(--primary-color);
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .template-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .template-btn {
            background: white;
            border: 2px solid var(--border-color);
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .template-btn:hover, .template-btn.active {
            border-color: var(--primary-color);
            background: rgba(250, 140, 50, 0.1);
        }

        .stats {
            display: flex;
            gap: 2rem;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: #28a745;
            color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .message.show {
            transform: translateX(0);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 12px 20px 212px; /* é€‚åº”ç§»åŠ¨ç«¯sidebarå®½åº¦200px+12px */
            }
            
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .container {
                padding: 0 10px;
            }
        }

        @media (max-width: 600px) {
            body {
                padding: 20px 8px 20px 188px; /* é€‚åº”sidebarå®½åº¦180px+8px */
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 20px 6px 20px 166px; /* é€‚åº”sidebarå®½åº¦160px+6px */
            }
        }

        @media (max-width: 375px) {
            body {
                padding: 20px 4px 20px 144px; /* é€‚åº”sidebarå®½åº¦140px+4px */
            }
        }

        @media (max-width: 360px) {
            body {
                padding: 10px; /* è¶…å°å±å¹•æ—¶ï¼Œsidebarå¯èƒ½è¢«overlayè¦†ç›– */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¤– AIæ—¥æŠ¥åŠ©æ‰‹</h1>
            <p>æ™ºèƒ½è§£æAIåˆ›æŠ•ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸“ä¸šæ–°é—»æŠ¥é“</p>
        </div>

        <div class="main-content">
            <!-- è¾“å…¥é¢æ¿ -->
            <div class="input-panel">
                <h2 class="panel-title">
                    ğŸ¯ æ™ºèƒ½è§£æ
                </h2>

                <!-- è¾“å…¥åŒºåŸŸ -->
                <div class="form-group">
                    <label for="rawInput">è¾“å…¥AIåˆ›æŠ•ä¿¡æ¯</label>
                    <textarea id="rawInput" 
                        placeholder="ç¤ºä¾‹è¾“å…¥ï¼š

â€¢ OpenAIå®Œæˆ100äº¿ç¾å…ƒCè½®èèµ„
â€¢ å­—èŠ‚è·³åŠ¨æŠ•èµ„AIèŠ¯ç‰‡å…¬å¸å£ä»ç§‘æŠ€
â€¢ DeepMindå‘å¸ƒæ–°ç‰ˆæœ¬å¤§æ¨¡å‹
â€¢ å°é¹æ±½è½¦
â€¢ ç‰¹æ–¯æ‹‰FSD
â€¢ Anthropic Claude

æ”¯æŒï¼š
âœ“ å®Œæ•´æ–°é—»æè¿°
âœ“ ç®€å•å…¬å¸+äº‹ä»¶
âœ“ ä»…å…¬å¸åç§°
âœ“ å¤šæ¡ä¿¡æ¯ï¼ˆæ¯è¡Œä¸€æ¡ï¼‰"
                        style="min-height: 200px;"></textarea>
                </div>

                <!-- å¿«é€Ÿç¤ºä¾‹ -->
                <div class="form-group">
                    <label>å¿«é€Ÿç¤ºä¾‹</label>
                    <div class="template-buttons">
                        <button class="template-btn" onclick="setExample('funding')">èèµ„ç¤ºä¾‹</button>
                        <button class="template-btn" onclick="setExample('company')">å…¬å¸ç¤ºä¾‹</button>
                        <button class="template-btn" onclick="setExample('multiple')">å¤šæ¡ç¤ºä¾‹</button>
                        <button class="template-btn" onclick="clearInput()">æ¸…ç©º</button>
                    </div>
                </div>

                <!-- é€‰é¡¹è®¾ç½® -->
                <div class="form-group">
                    <label>ç”Ÿæˆé€‰é¡¹</label>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 0.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0;">
                            <input type="checkbox" id="addBackground" checked>
                            <span>æ·»åŠ å…¬å¸èƒŒæ™¯</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0;">
                            <input type="checkbox" id="addAnalysis" checked>
                            <span>å¸‚åœºåˆ†æ</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0;">
                            <input type="checkbox" id="addImplications" checked>
                            <span>è¡Œä¸šå½±å“</span>
                        </label>
                    </div>
                </div>

                <div class="action-buttons">
                    <button type="button" class="btn" onclick="generateNews()" id="generateBtn">
                        ğŸ¤– æ™ºèƒ½ç”Ÿæˆæ–°é—»
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="clearAll()">
                        ğŸ”„ é‡ç½®æ‰€æœ‰
                    </button>
                </div>

                <!-- å¤„ç†çŠ¶æ€ -->
                <div id="processingStatus" style="display: none; margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid var(--primary-color);">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <div class="spinner" style="width: 16px; height: 16px; border: 2px solid #ddd; border-top: 2px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        <span id="statusText">æ­£åœ¨åˆ†æè¾“å…¥å†…å®¹...</span>
                    </div>
                </div>
            </div>

            <!-- è¾“å‡ºé¢æ¿ -->
            <div class="output-panel">
                <h2 class="panel-title">
                    ğŸ“° ç”Ÿæˆçš„æ–°é—»æŠ¥é“
                    <span style="margin-left: auto; font-size: 0.9rem; font-weight: normal;">
                        <span id="newsCount">å¾…ç”Ÿæˆ</span>
                    </span>
                </h2>

                <div id="output" class="output-text">è¾“å…¥AIåˆ›æŠ•ä¿¡æ¯ï¼Œç‚¹å‡»"æ™ºèƒ½ç”Ÿæˆæ–°é—»"å¼€å§‹åˆ›ä½œä¸“ä¸šæŠ¥é“...

ğŸ’¡ æ”¯æŒçš„è¾“å…¥æ ¼å¼ï¼š
â€¢ è¯¦ç»†æè¿°ï¼šOpenAIå®Œæˆ100äº¿ç¾å…ƒCè½®èèµ„ï¼ŒæŠ•èµ„æ–¹åŒ…æ‹¬å¾®è½¯ç­‰
â€¢ ç®€å•ä¿¡æ¯ï¼šå­—èŠ‚è·³åŠ¨æŠ•èµ„å£ä»ç§‘æŠ€  
â€¢ ä»…å…¬å¸åï¼šå°é¹æ±½è½¦ã€ç‰¹æ–¯æ‹‰
â€¢ å¤šæ¡ä¿¡æ¯ï¼šæ¯è¡Œä¸€æ¡ï¼Œè‡ªåŠ¨è§£æ

AIåŠ©æ‰‹å°†ä¸ºæ‚¨ï¼š
âœ“ è§£æå…³é”®ä¿¡æ¯
âœ“ è¡¥å……å…¬å¸èƒŒæ™¯
âœ“ æ·»åŠ å¸‚åœºåˆ†æ
âœ“ ç”Ÿæˆä¸“ä¸šæŠ¥é“</div>

                <div class="action-buttons">
                    <button class="btn" onclick="copyToClipboard()">
                        ğŸ“‹ å¤åˆ¶åˆ°å‰ªè´´æ¿
                    </button>
                    <button class="btn btn-secondary" onclick="editAndRegenerate()">
                        âœï¸ ä¿®æ”¹é‡ç”Ÿæˆ
                    </button>
                    <button class="btn btn-secondary" onclick="exportAsFile()">
                        ğŸ’¾ å¯¼å‡ºæ–‡ä»¶
                    </button>
                </div>

                <div class="stats">
                    <span>å­—æ•°ï¼š<span id="wordCount">0</span></span>
                    <span>é¢„è®¡é˜…è¯»ï¼š<span id="readTime">0</span>åˆ†é’Ÿ</span>
                    <span>ç”Ÿæˆè´¨é‡ï¼š<span id="qualityScore">-</span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¶ˆæ¯æç¤º -->
    <div id="message" class="message"></div>

    <script>
        // å…¨å±€å˜é‡
        let generatedNews = '';
        let processingState = false;

        // ç¤ºä¾‹æ•°æ®
        const examples = {
            funding: 'OpenAIå®Œæˆ100äº¿ç¾å…ƒCè½®èèµ„ï¼ŒæŠ•èµ„æ–¹åŒ…æ‹¬å¾®è½¯ã€çº¢æ‰èµ„æœ¬',
            company: 'å°é¹æ±½è½¦\nç‰¹æ–¯æ‹‰FSD\nAnthropicClaude',
            multiple: `å£ä»ç§‘æŠ€è·å¾—å­—èŠ‚è·³åŠ¨æŠ•èµ„
DeepMindå‘å¸ƒæ–°ç‰ˆæœ¬å¤§æ¨¡å‹
ç™¾åº¦æ–‡å¿ƒä¸€è¨€å‡çº§
å•†æ±¤ç§‘æŠ€ä¸åä¸ºåˆä½œ`
        };

        // è®¾ç½®ç¤ºä¾‹
        function setExample(type) {
            const input = document.getElementById('rawInput');
            input.value = examples[type] || '';
            input.focus();
        }

        // æ¸…ç©ºè¾“å…¥
        function clearInput() {
            document.getElementById('rawInput').value = '';
            document.getElementById('rawInput').focus();
        }

        // æ™ºèƒ½ç”Ÿæˆæ–°é—»
        async function generateNews() {
            const rawInput = document.getElementById('rawInput').value.trim();
            
            if (!rawInput) {
                showMessage('è¯·è¾“å…¥AIåˆ›æŠ•ä¿¡æ¯', 'error');
                return;
            }

            if (processingState) {
                showMessage('æ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨å€™...', 'warning');
                return;
            }

            setProcessingState(true);
            
            try {
                const options = {
                    addBackground: document.getElementById('addBackground').checked,
                    addAnalysis: document.getElementById('addAnalysis').checked,
                    addImplications: document.getElementById('addImplications').checked
                };

                updateStatus('æ­£åœ¨åˆ†æè¾“å…¥å†…å®¹...');
                
                // æ¨¡æ‹ŸAIå¤„ç†è¿‡ç¨‹
                const parsedInfo = await parseInput(rawInput);
                
                updateStatus('æ­£åœ¨ç”Ÿæˆæ–°é—»æŠ¥é“...');
                
                const newsArticle = await generateNewsArticle(parsedInfo, options);
                
                updateStatus('å®Œæˆï¼');
                
                displayGeneratedNews(newsArticle);
                updateStats(newsArticle);
                
                showMessage('æ–°é—»æŠ¥é“ç”ŸæˆæˆåŠŸï¼', 'success');
                
            } catch (error) {
                console.error('ç”Ÿæˆå¤±è´¥:', error);
                showMessage('ç”Ÿæˆå¤±è´¥: ' + error.message, 'error');
            } finally {
                setProcessingState(false);
            }
        }

        // è§£æè¾“å…¥å†…å®¹
        async function parseInput(input) {
            await new Promise(resolve => setTimeout(resolve, 1000)); // æ¨¡æ‹Ÿå¤„ç†æ—¶é—´
            
            const lines = input.split('\n').filter(line => line.trim());
            const parsedItems = [];

            for (const line of lines) {
                const item = await parseLineToNewsItem(line.trim());
                if (item) {
                    parsedItems.push(item);
                }
            }

            return parsedItems;
        }

        // è§£æå•è¡Œå†…å®¹
        async function parseLineToNewsItem(line) {
            // æ™ºèƒ½è§£æé€»è¾‘ï¼ˆè¿™é‡Œç”¨ç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…å¯ä»¥è°ƒç”¨AI APIï¼‰
            const item = {
                originalText: line,
                company: '',
                amount: '',
                round: '',
                investors: '',
                event: '',
                sector: '',
                confidence: 0.8
            };

            // æå–å…¬å¸å
            const companyPatterns = [
                /^([^å®Œæˆè·å¾—æ”¶è´­å‘å¸ƒå®£å¸ƒ]+)(?=å®Œæˆ|è·å¾—|æ”¶è´­|å‘å¸ƒ|å®£å¸ƒ)/,
                /^([A-Za-z\u4e00-\u9fa5]+)/
            ];
            
            for (const pattern of companyPatterns) {
                const match = line.match(pattern);
                if (match) {
                    item.company = match[1].trim();
                    break;
                }
            }

            // æå–é‡‘é¢
            const amountMatch = line.match(/(\d+(?:\.\d+)?(?:ä¸‡|åƒä¸‡|äº¿)?(?:ç¾å…ƒ|äººæ°‘å¸|å…ƒ))/);
            if (amountMatch) {
                item.amount = amountMatch[1];
            }

            // æå–è½®æ¬¡
            const roundMatch = line.match(/(ç§å­è½®|Pre-Aè½®|Aè½®|Bè½®|Cè½®|Dè½®|æˆ˜ç•¥æŠ•èµ„|IPO)/);
            if (roundMatch) {
                item.round = roundMatch[1];
            }

            // æå–æŠ•èµ„æ–¹
            const investorMatch = line.match(/æŠ•èµ„æ–¹?[:ï¼š]?([^ï¼Œã€‚]+)/);
            if (investorMatch) {
                item.investors = investorMatch[1].trim();
            }

            // ç¡®å®šäº‹ä»¶ç±»å‹
            if (line.includes('å®Œæˆ') || line.includes('è·å¾—') || line.includes('èèµ„')) {
                item.event = 'èèµ„';
            } else if (line.includes('æ”¶è´­')) {
                item.event = 'æ”¶è´­';
            } else if (line.includes('å‘å¸ƒ') || line.includes('æ¨å‡º')) {
                item.event = 'äº§å“å‘å¸ƒ';
            } else if (line.includes('åˆä½œ')) {
                item.event = 'åˆä½œ';
            } else {
                item.event = 'åŠ¨æ€';
            }

            return item;
        }

        // ç”Ÿæˆæ–°é—»æ–‡ç« 
        async function generateNewsArticle(parsedItems, options) {
            await new Promise(resolve => setTimeout(resolve, 1500)); // æ¨¡æ‹ŸAIç”Ÿæˆæ—¶é—´
            
            const now = new Date();
            const date = now.toLocaleDateString('zh-CN');
            
            let article = `# AIåˆ›æŠ•æ—¥æŠ¥ - ${date}\n\n## ä»Šæ—¥è¦é—»\n\n`;
            
            for (let i = 0; i < parsedItems.length; i++) {
                const item = parsedItems[i];
                article += await generateSingleNews(item, options, i + 1);
                if (i < parsedItems.length - 1) {
                    article += '\n---\n\n';
                }
            }

            article += `\n\n---\n*ç”Ÿæˆæ—¶é—´ï¼š${now.toLocaleTimeString('zh-CN')}*\n*æ¥æºï¼šChatSVTR AIæ—¥æŠ¥åŠ©æ‰‹*`;
            
            return article;
        }

        // ç”Ÿæˆå•æ¡æ–°é—»
        async function generateSingleNews(item, options, index) {
            let news = `### ${index}. ${item.company}`;
            
            if (item.event && item.amount) {
                news += `${item.event}${item.amount}`;
                if (item.round) {
                    news += `${item.round}`;
                }
            } else if (item.event) {
                news += `${item.event}`;
            }
            
            news += '\n\n';

            // äº‹ä»¶æè¿°
            if (item.amount || item.round || item.investors) {
                news += '**èèµ„è¯¦æƒ…**\n';
                if (item.amount) news += `- èèµ„é‡‘é¢ï¼š${item.amount}\n`;
                if (item.round) news += `- è½®æ¬¡ï¼š${item.round}\n`;
                if (item.investors) news += `- æŠ•èµ„æ–¹ï¼š${item.investors}\n`;
                news += '\n';
            }

            // å…¬å¸èƒŒæ™¯ï¼ˆæ¨¡æ‹ŸAIç”Ÿæˆï¼‰
            if (options.addBackground) {
                news += '**å…¬å¸èƒŒæ™¯**\n';
                news += `${item.company}æ˜¯ä¸€å®¶ä¸“æ³¨äºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„åˆ›æ–°ä¼ä¸šï¼Œè‡´åŠ›äºé€šè¿‡å…ˆè¿›çš„AIæŠ€æœ¯æ¨åŠ¨è¡Œä¸šæ•°å­—åŒ–è½¬å‹ã€‚å…¬å¸åœ¨${item.sector || 'äººå·¥æ™ºèƒ½'}é¢†åŸŸå…·æœ‰æ·±åšçš„æŠ€æœ¯ç§¯ç´¯å’Œä¸°å¯Œçš„åº”ç”¨ç»éªŒã€‚\n\n`;
            }

            // å¸‚åœºåˆ†æï¼ˆæ¨¡æ‹ŸAIç”Ÿæˆï¼‰
            if (options.addAnalysis) {
                news += '**å¸‚åœºåˆ†æ**\n';
                news += `å½“å‰AIè¡Œä¸šæ­£å¤„äºå¿«é€Ÿå‘å±•é˜¶æ®µï¼Œéšç€æŠ€æœ¯ä¸æ–­æˆç†Ÿå’Œåº”ç”¨åœºæ™¯çš„æ‹“å±•ï¼Œå¸‚åœºå¯¹AIè§£å†³æ–¹æ¡ˆçš„éœ€æ±‚æŒç»­å¢é•¿ã€‚${item.company}æ­¤æ¬¡${item.event}åæ˜ äº†æŠ•èµ„è€…å¯¹AIè¡Œä¸šé•¿æœŸå‘å±•å‰æ™¯çš„ä¿¡å¿ƒã€‚\n\n`;
            }

            // è¡Œä¸šå½±å“ï¼ˆæ¨¡æ‹ŸAIç”Ÿæˆï¼‰
            if (options.addImplications) {
                news += '**è¡Œä¸šå½±å“**\n';
                news += `è¿™ä¸€åŠ¨æ€å°†è¿›ä¸€æ­¥æ¨åŠ¨AIè¡Œä¸šçš„åˆ›æ–°å‘å±•ï¼Œä¸ºç›¸å…³äº§ä¸šé“¾ä¸Šä¸‹æ¸¸ä¼ä¸šå¸¦æ¥æ–°çš„åˆä½œæœºé‡ï¼ŒåŒæ—¶ä¹Ÿä¸ºè¡Œä¸šæ ‡å‡†åŒ–å’Œè§„æ¨¡åŒ–å‘å±•æä¾›äº†æœ‰ç›Šå€Ÿé‰´ã€‚\n\n`;
            }

            return news;
        }

        // æ˜¾ç¤ºç”Ÿæˆçš„æ–°é—»
        function displayGeneratedNews(article) {
            generatedNews = article;
            document.getElementById('output').textContent = article;
            document.getElementById('newsCount').textContent = 'å·²ç”Ÿæˆ';
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats(article) {
            const wordCount = article.length;
            const readTime = Math.ceil(wordCount / 200);
            const qualityScore = calculateQualityScore(article);
            
            document.getElementById('wordCount').textContent = wordCount;
            document.getElementById('readTime').textContent = readTime;
            document.getElementById('qualityScore').textContent = qualityScore + '/100';
        }

        // è®¡ç®—è´¨é‡è¯„åˆ†ï¼ˆç®€åŒ–ç‰ˆï¼‰
        function calculateQualityScore(article) {
            let score = 60; // åŸºç¡€åˆ†
            
            if (article.includes('èèµ„è¯¦æƒ…')) score += 10;
            if (article.includes('å…¬å¸èƒŒæ™¯')) score += 10;
            if (article.includes('å¸‚åœºåˆ†æ')) score += 10;
            if (article.includes('è¡Œä¸šå½±å“')) score += 10;
            
            return Math.min(score, 100);
        }

        // è®¾ç½®å¤„ç†çŠ¶æ€
        function setProcessingState(processing) {
            processingState = processing;
            const button = document.getElementById('generateBtn');
            const status = document.getElementById('processingStatus');
            
            if (processing) {
                button.disabled = true;
                button.textContent = 'ğŸ¤– ç”Ÿæˆä¸­...';
                status.style.display = 'block';
            } else {
                button.disabled = false;
                button.textContent = 'ğŸ¤– æ™ºèƒ½ç”Ÿæˆæ–°é—»';
                status.style.display = 'none';
            }
        }

        // æ›´æ–°çŠ¶æ€æ–‡æœ¬
        function updateStatus(text) {
            document.getElementById('statusText').textContent = text;
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        async function copyToClipboard() {
            if (!generatedNews) {
                showMessage('è¯·å…ˆç”Ÿæˆæ–°é—»å†…å®¹', 'error');
                return;
            }

            try {
                await navigator.clipboard.writeText(generatedNews);
                showMessage('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¯ç›´æ¥ç²˜è´´åˆ°é£ä¹¦æˆ–å…¶ä»–å¹³å°', 'success');
            } catch (err) {
                // é™çº§æ–¹æ¡ˆ
                const textArea = document.createElement('textarea');
                textArea.value = generatedNews;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showMessage('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
            }
        }

        // ä¿®æ”¹é‡ç”Ÿæˆ
        function editAndRegenerate() {
            if (!generatedNews) {
                showMessage('è¯·å…ˆç”Ÿæˆæ–°é—»å†…å®¹', 'error');
                return;
            }
            
            const currentInput = document.getElementById('rawInput').value;
            const newInput = prompt('è¯·ä¿®æ”¹è¾“å…¥å†…å®¹ï¼š', currentInput);
            
            if (newInput && newInput !== currentInput) {
                document.getElementById('rawInput').value = newInput;
                generateNews();
            }
        }

        // å¯¼å‡ºä¸ºæ–‡ä»¶
        function exportAsFile() {
            if (!generatedNews) {
                showMessage('è¯·å…ˆç”Ÿæˆæ–°é—»å†…å®¹', 'error');
                return;
            }

            const blob = new Blob([generatedNews], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `AIåˆ›æŠ•æ–°é—»_${new Date().toLocaleDateString('zh-CN').replace(/\//g, '')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showMessage('æ–‡ä»¶å·²ä¸‹è½½', 'success');
        }

        // æ¸…ç©ºæ‰€æœ‰
        function clearAll() {
            document.getElementById('rawInput').value = '';
            generatedNews = '';
            document.getElementById('output').textContent = `è¾“å…¥AIåˆ›æŠ•ä¿¡æ¯ï¼Œç‚¹å‡»"æ™ºèƒ½ç”Ÿæˆæ–°é—»"å¼€å§‹åˆ›ä½œä¸“ä¸šæŠ¥é“...

ğŸ’¡ æ”¯æŒçš„è¾“å…¥æ ¼å¼ï¼š
â€¢ è¯¦ç»†æè¿°ï¼šOpenAIå®Œæˆ100äº¿ç¾å…ƒCè½®èèµ„ï¼ŒæŠ•èµ„æ–¹åŒ…æ‹¬å¾®è½¯ç­‰
â€¢ ç®€å•ä¿¡æ¯ï¼šå­—èŠ‚è·³åŠ¨æŠ•èµ„å£ä»ç§‘æŠ€  
â€¢ ä»…å…¬å¸åï¼šå°é¹æ±½è½¦ã€ç‰¹æ–¯æ‹‰
â€¢ å¤šæ¡ä¿¡æ¯ï¼šæ¯è¡Œä¸€æ¡ï¼Œè‡ªåŠ¨è§£æ

AIåŠ©æ‰‹å°†ä¸ºæ‚¨ï¼š
âœ“ è§£æå…³é”®ä¿¡æ¯
âœ“ è¡¥å……å…¬å¸èƒŒæ™¯
âœ“ æ·»åŠ å¸‚åœºåˆ†æ
âœ“ ç”Ÿæˆä¸“ä¸šæŠ¥é“`;
            
            document.getElementById('newsCount').textContent = 'å¾…ç”Ÿæˆ';
            document.getElementById('wordCount').textContent = '0';
            document.getElementById('readTime').textContent = '0';
            document.getElementById('qualityScore').textContent = '-';
            
            showMessage('å·²é‡ç½®æ‰€æœ‰å†…å®¹', 'success');
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(text, type = 'success') {
            const message = document.getElementById('message');
            message.textContent = text;
            message.className = `message ${type}`;
            message.classList.add('show');
            
            setTimeout(() => {
                message.classList.remove('show');
            }, 3000);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¤– AIæ—¥æŠ¥åŠ©æ‰‹ï¼ˆæ™ºèƒ½ç‰ˆï¼‰å·²å¯åŠ¨');
            
            // ç»‘å®šå›è½¦é”®å¿«æ·ç”Ÿæˆ
            document.getElementById('rawInput').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    e.preventDefault();
                    generateNews();
                }
            });
        });
    </script>
</body>
</html>