<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•é¡¹ç›®æäº¤è¡¨å•</title>
    <style>
        :root {
            --primary-color: #FA8C32;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .test-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 0;
            display: inline-block;
        }
        
        .test-btn:hover {
            background: #e17a28;
        }
        
        .result {
            background: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
        }
        
        .success {
            border-left-color: #4caf50;
            background: #f1f8e9;
        }
        
        .error {
            border-left-color: #f44336;
            background: #ffebee;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª é¡¹ç›®æäº¤åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="result">
            <strong>æµ‹è¯•ç›®æ ‡:</strong><br>
            âœ… é¡¹ç›®éœ€æ±‚å¤šé€‰åŠŸèƒ½<br>
            âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½<br>
            âœ… APIæ•°æ®æäº¤<br>
            âœ… ç®¡ç†ä¸­å¿ƒæ•°æ®æ˜¾ç¤º<br>
        </div>
        
        <button class="test-btn" onclick="testProjectSubmission()">ğŸš€ æ‰“å¼€é¡¹ç›®æäº¤è¡¨å•</button>
        <button class="test-btn" onclick="testAPIConnection()">ğŸ”— æµ‹è¯•APIè¿æ¥</button>
        <button class="test-btn" onclick="checkAdminCenter()">ğŸ“Š æŸ¥çœ‹ç®¡ç†ä¸­å¿ƒ</button>
        
        <div id="testResults"></div>
        
        <h2>ğŸ“‹ åŠŸèƒ½è¯´æ˜</h2>
        <ul>
            <li><strong>é¡¹ç›®éœ€æ±‚:</strong> æ”¯æŒå¤šé€‰ "æ‰¾äºº"ã€"æ‰¾é’±"ã€"æ‰¾æ–¹å‘"ã€"å…¶ä»–"</li>
            <li><strong>æ–‡ä»¶ä¸Šä¼ :</strong> æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼Œæœ€å¤š5ä¸ªæ–‡ä»¶ï¼Œæ¯ä¸ªæœ€å¤§10MB</li>
            <li><strong>æ”¯æŒæ ¼å¼:</strong> PDF, DOC, PPT, TXT, JPG, PNG</li>
            <li><strong>æ•°æ®åŒæ­¥:</strong> æäº¤åç«‹å³åœ¨ç®¡ç†ä¸­å¿ƒæ˜¾ç¤º</li>
        </ul>
        
        <h2>ğŸ”§ æŠ€æœ¯å®ç°</h2>
        <ul>
            <li>å‰ç«¯è¡¨å•å¢å¼º: checkboxå¤šé€‰ + æ–‡ä»¶æ‹–æ‹½</li>
            <li>APIæ•°æ®ç»“æ„: needsæ•°ç»„ + filesæ•°ç»„</li>
            <li>ç®¡ç†ç•Œé¢ä¼˜åŒ–: æ–°å¢éœ€æ±‚åˆ—å’Œé™„ä»¶åˆ—</li>
            <li>å®æ—¶æ•°æ®åŒæ­¥: KVå­˜å‚¨ + åˆ·æ–°æŒ‰é’®</li>
        </ul>
    </div>

    <!-- å¼•å…¥header-enhancements.jsä»¥ä½¿ç”¨é¡¹ç›®æäº¤åŠŸèƒ½ -->
    <script>
        // æ¨¡æ‹Ÿheader-enhancements.jsçš„é¡¹ç›®æäº¤åŠŸèƒ½
        function testProjectSubmission() {
            // ç›´æ¥é‡å®šå‘åˆ°ä¸»é¡µå¹¶è§¦å‘é¡¹ç›®æäº¤
            window.location.href = '/#submit-project';
        }
        
        async function testAPIConnection() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '<div class="result">æ­£åœ¨æµ‹è¯•APIè¿æ¥...</div>';
            
            try {
                // æµ‹è¯•ç»Ÿè®¡API
                const statsResponse = await fetch('/api/projects?action=stats');
                const statsData = await statsResponse.json();
                
                // æµ‹è¯•åˆ—è¡¨API
                const listResponse = await fetch('/api/projects?action=list');
                const listData = await listResponse.json();
                
                resultsDiv.innerHTML = `
                    <div class="result success">
                        <h3>âœ… APIè¿æ¥æµ‹è¯•æˆåŠŸ!</h3>
                        <p><strong>é¡¹ç›®ç»Ÿè®¡:</strong> æ€»è®¡ ${statsData.totalProjects} ä¸ªé¡¹ç›®ï¼Œå¾…å®¡æ ¸ ${statsData.pendingProjects} ä¸ª</p>
                        <p><strong>é¡¹ç›®åˆ—è¡¨:</strong> æˆåŠŸè·å– ${listData.length} ä¸ªé¡¹ç›®è®°å½•</p>
                        <details>
                            <summary>è¯¦ç»†æ•°æ® (ç‚¹å‡»å±•å¼€)</summary>
                            <pre>${JSON.stringify(statsData, null, 2)}</pre>
                        </details>
                    </div>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result error">
                        <h3>âŒ APIè¿æ¥å¤±è´¥</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        function checkAdminCenter() {
            window.open('/pages/admin-center.html', '_blank');
        }
        
        // è‡ªåŠ¨è¿è¡ŒAPIæµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(testAPIConnection, 1000);
        });
    </script>
</body>
</html>